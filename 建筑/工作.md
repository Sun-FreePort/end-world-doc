### 工作

玩家可以开垦不动产，在一座不动产开垦完毕之前，再开垦新的不动产。

开垦好的不动产可以发布工作岗位，让其他玩家作为雇员（劳方），为自己（资方）产生剩余价值。

---

甲玩家拥有建筑：设置一个每 0.5 单位【主产物】的薪资（整数）；
快乐效果：提供 30% 额外工作产出，公式：`0.3 * (当前快乐 / 快乐上限)`
专精效果：提供额外工作产出，公式：`某专精的级别 * 8% + 经验百分比 * 0.05%`
乙玩家应聘工作：根据 `标准产出 * (1 + 快乐加成 + 专精加成)`

快乐变化设定：

- 基础：装备可以影响【快乐上限】，但没有永久提升的办法
- 增加：食用烧烤食物
- 降低：每日降低 10 点
- 降低：战斗中重伤

专精退化设定：

- 每天，所有专精会降低 `n * 级别` 的经验，n 为具体值，以供调整。
- 工作经验与产出有关，工作型装备、装备的随机附魔，均可增加产出。如果玩家在正常工作已经无法获得升级*，可以通过旁门来提升。
- 譬如：每天 8 小时工作，获得 32 专精经验，但现在级别为 4，每天退化 32 专精经验，则当天专精经验为 0 变动。
- 同上例子，玩家作为厨子，获取到“铁锅铲”装备，该装备增加 1 专精经验获取（每工时），附魔提供了 10% 的专精经验获取，则每日可以获得 `43.2 = 32 + 1 * 8 + 32 * 0.1` 专精经验，高于退化经验，可继续升级。
- 当专精经验为 0%，级别高于 0，则会发生降级，降为 99% 经验的下一级。

战斗无专精，升级本身就弥补了战斗专精（升级会提供 HP、攻击、防御等的数值）

#### 雇佣

玩家可以将 **本地的、完工的不动产** 所具备的岗位，发布成招聘启事，这样该岗位就有其他玩家来应聘。

玩家需要设置一个薪酬额度，作为其他玩家的工作回报。

薪资标准：

- 对同种建筑，每一地只能设置统一的薪资标准
- 薪资将在应聘时从老板账户中扣除，如果老板不足够发放薪资，则关掉这个招聘，并给老板发一条消息
- 薪资将在完工时计入雇员账户中

#### 终止雇佣（Fake）

雇员/自己可以主动终止雇佣/工作：

- 如果是雇员，应聘一小时内取消，薪资为 `已工作小时 * 时薪 - floor(时薪 * 30%) - 1`。
- 如果是雇员，应聘一小时或以上取消，薪资为 `已工作小时 * 时薪 - floor(时薪 * 20%) - 1`。
- 产出为 `已工作小时 * 每小时产出`

老板也可以结束招聘启事，保证不会有人继续应聘。这种修改不影响已有的工作合约，故不存在补偿。

#### 一些备忘

截至目前，有一些问题暂停处理，直到时间充裕时，在考虑优化这些问题：

工作结束后，自动解除双方劳动关系。

玩家暂不能查看其他地区自己发布的招聘启事。

某地、某种建筑只能进行一种工作类型，譬如”为自己工作“时，该建筑无法切换到”发布公开招聘“的状态，后者牵连到税务等问题。

#### 属性（Job）
  
- **雇员的每小时收入**：雇员每小时能获得的现金收入
- **雇员的每小时产出**：雇员每小时为资方产出的物资数量
- **终止雇佣补偿**：当资方认为继续生产不利于自己时，主动终止所需对劳方的补偿

#### 程序备忘

作为雇员，在用户表冗余当前 work，每次和服务器交互时，根据冗余来触发 work 刷新机制。

作为老板，每 120s 检测自己名下的 Work 是否应该结算。

暂不考虑合约双方均不登录的情况，这部分工作放到僵尸角色清理脚本。

谨防 work 重复处理，处理时加一个原子锁。
